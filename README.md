# Запросы к базе данных и автоматизация API-теста (создание заказа и получение по треку)

## test_order_api.png 
Скриншот с запуском основного теста в Visual Studio.

---

## test_order_structure.png 
Скриншот с запуском расширенного теста в Visual Studio.

---

## requests.sql
Запросы к базе данных для следующих заданий:
- **Задание 1**
Представь: тебе нужно проверить, отображается ли созданный заказ в базе данных.
Для этого: выведи список логинов курьеров с количеством их заказов в статусе «В доставке» (поле inDelivery = true). 
- **Задание 2**
Ты тестируешь статусы заказов. Нужно убедиться, что в базе данных они записываются корректно.
Для этого: выведи все трекеры заказов и их статусы. 
Статусы определяются по следующему правилу:
Если поле finished == true, то вывести статус 2.
Если поле canсelled == true, то вывести статус -1.
Если поле inDelivery == true, то вывести статус 1.
Для остальных случаев вывести 0.

---

# Автоматизация API-теста: создание заказа и получение по треку

Данный проект реализует автоматизированный тест для проверки корректной работы API сервиса по управлению заказами.

## Цель теста

Проверить сквозной сценарий:
1. Отправка POST-запроса на создание заказа
2. Извлечение трек-номера из ответа
3. Отправка GET-запроса на получение заказа по трек-номеру
4. Проверка, что код ответа при получении заказа — **200**
5. Дополнительно проверить:
- Наличие в ответе обязательного ключа "order"
- Соответствие каждого поля в объекте "order" ожидаемому типу данных 

---

## Требования

- Для запуска тестов должны быть установлены пакеты pytest и requests
- Запуск всех тестов выполняется командой pytest

---

## Описание файлов

### configuration.py
Содержит конфигурационные параметры:
- `URL_SERVICE` - базовый URL сервиса
- `CREATE_ORDER_PATH` - эндпоинт для создания заказа
- `GET_ORDER_BY_TRACK_PATH` - эндпоинт для получения заказа по треку

### data.py
Содержит тестовые данные:
- `headers` - заголовки HTTP-запросов
- `order_body` - тело запроса для создания заказа
- `get_order_body()` - функция для получения копии тела заказа

### sender_stand_request.py
Функции для работы с API:
- `create_order(body)` - создание нового заказа (POST)
- `get_order_by_track(track_number)` - получение заказа по треку (GET)

### test_order_api.py
Основной тестовый сценарий, который проверяет:
1. Успешное создание заказа (статус 201)
2. Корректность трек-номера (целое положительное число)
3. Успешное получение заказа по треку (статус 200)

### test_order_structure.py
Расширенный тестовый сценарий, который проверяет:
1. Успешное создание заказа (статус 201)
2. Корректность трек-номера (целое положительное число)
3. Успешное получение заказа по треку (статус 200)
4. Наличие в ответе обязательного ключа "order"
5. Соответствие каждого поля в объекте "order" ожидаемому типу данных 